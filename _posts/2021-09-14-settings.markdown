---
layout: post
title: 개발 환경 구성 (settings)
date: 2021-09-15 01:02:00 +0900
category: 환경설정
---
## 작업 환경 구성

MN) [코드를 포함하여 명령어 실행 결과 첨부된 노션으로 이동](https://mango-atom-e3f.notion.site/9e21f95df07747d3bbae61539488540c)

* ~~git~~
* ~~jdk 11~~
* ~~node~~
* ~~gradle~~
    * 7.x 대 버전은 기존의 nara-serverice와 호환이 안되어 **6.9.1** 으로 downgrade 후 wrapper 생성 작업 진행
    * ``` brew install gradle@6 ```
    * ``` >> 프로젝트 루트 >> gradle wrapper --gradle-version=6.7     ```
    
    MN) gradle 설치 후 메세지 (아직 프로젝트가 없어서 `>> 프로젝트 루트 >> gradle wrapper --gradle-version=6.7` 명령어는 실행X)
    ```shell
    negseuteuliui-MacBookPro:~ nextree$ brew install gradle@6
    Updating Homebrew...
    ==> Homebrew is run entirely by unpaid volunteers. Please consider donating:
    https://github.com/Homebrew/brew#donations
    ==> Auto-updated Homebrew!
    Updated 1 tap (homebrew/core).
    ==> New Formulae
    jpdfbookmarks
    ==> Updated Formulae
    Updated 7 formulae.
    
    ==> Downloading https://ghcr.io/v2/homebrew/core/openjdk/11/manifests/11.0.12
    ######################################################################## 100.0%
    ==> Downloading https://ghcr.io/v2/homebrew/core/openjdk/11/blobs/sha256:2de8af5
    ==> Downloading from https://pkg-containers.githubusercontent.com/ghcr1/blobs/sh
    ######################################################################## 100.0%
    ==> Downloading https://ghcr.io/v2/homebrew/core/gradle/6/manifests/6.9.1
    ######################################################################## 100.0%
    ==> Downloading https://ghcr.io/v2/homebrew/core/gradle/6/blobs/sha256:32c1d0544
    ==> Downloading from https://pkg-containers.githubusercontent.com/ghcr1/blobs/sh
    ######################################################################## 100.0%
    ==> Installing dependencies for gradle@6: openjdk@11
    ==> Installing gradle@6 dependency: openjdk@11
    ==> Pouring openjdk@11--11.0.12.big_sur.bottle.tar.gz
    🍺  /usr/local/Cellar/openjdk@11/11.0.12: 679 files, 297.9MB
    ==> Installing gradle@6
    ==> Pouring gradle@6--6.9.1.all.bottle.tar.gz
    ==> Caveats
    gradle@6 is keg-only, which means it was not symlinked into /usr/local,
    because this is an alternate version of another formula.
    
    If you need to have gradle@6 first in your PATH, run:
    echo 'export PATH="/usr/local/opt/gradle@6/bin:$PATH"' >> /Users/nextree/.bash_profile
    
    ==> Summary
    🍺  /usr/local/Cellar/gradle@6/6.9.1: 11,246 files, 259.0MB
    ==> Caveats
    ==> gradle@6
    gradle@6 is keg-only, which means it was not symlinked into /usr/local,
    because this is an alternate version of another formula.
    
    If you need to have gradle@6 first in your PATH, run:
    echo 'export PATH="/usr/local/opt/gradle@6/bin:$PATH"' >> /Users/nextree/.bash_profile
  ```
* ~~docker~~
    * docker-compose로 필요한 컨테이너 생성 및 볼륨 mount
        > MN) docker-compose.yml이 있는 root 파일로 이동해서 `docker-compose up -d` 명령어를 실행한다.
        * ```>> cd [root dir with yml] ```
        * ```>> docker-compose up -d```
    * db
        * [~~mysql~~](https://gitlab.com/naraplatform/nara-dev-log/-/blob/main/21-09-2주차/ref/210907/MYSQL.zip)
        * mongodb __(TODO)__
    * [kafka](https://gitlab.com/naraplatform/nara-dev-log/-/blob/main/21-09-2주차/ref/210907/KAFKA.zip)
* ~~gcp~~
    * nara-dev 클러스터 권한 확인
      > 파이썬은 이미 설치되어 있어서 따로 설치하지 않았음(python -V로 버전확인만 하였음) <br/>
      https://cloud.google.com/sdk/docs/install 에서 첫번째 패키지(macOS 64비트) 
      다운로드 받은 뒤, 압축파일을 풀고 풀어진 폴더의 상위 경로(루트)에서 
      ./google-cloud-sdk/install.sh 명령어를 실행함으로써 google cloud를 설치하였음.
      아래는 해당 명령어 실행 결과.
      <br/>
    ```
       Welcome to the Google Cloud SDK!
    
              To help improve the quality of this product, we collect anonymized usage data
              and anonymized stacktraces when crashes are encountered; additional information
              is available at <https://cloud.google.com/sdk/usage-statistics>. This data is
              handled in accordance with our privacy policy
              <https://cloud.google.com/terms/cloud-privacy-notice>. You may choose to opt in this
              collection now (by choosing 'Y' at the below prompt), or at any time in the
              future by running the following command:
    
                  gcloud config set disable_usage_reporting false
    
              Do you want to help improve the Google Cloud SDK (y/N)?  n
    
    
        Your current Cloud SDK version is: 356.0.0
        The latest available version is: 357.0.0
        
        ┌───────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
        │                                                   Components                                                  │
        ├──────────────────┬──────────────────────────────────────────────────────┬──────────────────────────┬──────────┤
        │      Status      │                         Name                         │            ID            │   Size   │
        ├──────────────────┼──────────────────────────────────────────────────────┼──────────────────────────┼──────────┤
        │ Update Available │ Cloud SDK Core Libraries                             │ core                     │ 20.2 MiB │
        │ Not Installed    │ App Engine Go Extensions                             │ app-engine-go            │  4.8 MiB │
        │ Not Installed    │ Appctl                                               │ appctl                   │ 18.5 MiB │
        │ Not Installed    │ Cloud Bigtable Command Line Tool                     │ cbt                      │  7.6 MiB │
        │ Not Installed    │ Cloud Bigtable Emulator                              │ bigtable                 │  6.6 MiB │
        │ Not Installed    │ Cloud Datalab Command Line Tool                      │ datalab                  │  < 1 MiB │
        │ Not Installed    │ Cloud Datastore Emulator                             │ cloud-datastore-emulator │ 18.4 MiB │
        │ Not Installed    │ Cloud Firestore Emulator                             │ cloud-firestore-emulator │ 40.4 MiB │
        │ Not Installed    │ Cloud Pub/Sub Emulator                               │ pubsub-emulator          │ 60.4 MiB │
        │ Not Installed    │ Cloud SQL Proxy                                      │ cloud_sql_proxy          │  7.4 MiB │
        │ Not Installed    │ Emulator Reverse Proxy                               │ emulator-reverse-proxy   │ 14.5 MiB │
        │ Not Installed    │ Google Cloud Build Local Builder                     │ cloud-build-local        │  6.2 MiB │
        │ Not Installed    │ Google Container Registry's Docker credential helper │ docker-credential-gcr    │  2.2 MiB │
        │ Not Installed    │ Kustomize                                            │ kustomize                │  7.6 MiB │
        │ Not Installed    │ Minikube                                             │ minikube                 │ 26.4 MiB │
        │ Not Installed    │ Nomos CLI                                            │ nomos                    │ 24.3 MiB │
        │ Not Installed    │ On-Demand Scanning API extraction helper             │ local-extract            │ 12.5 MiB │
        │ Not Installed    │ Skaffold                                             │ skaffold                 │ 19.7 MiB │
        │ Not Installed    │ anthos-auth                                          │ anthos-auth              │ 17.5 MiB │
        │ Not Installed    │ config-connector                                     │ config-connector         │ 48.9 MiB │
        │ Not Installed    │ gcloud Alpha Commands                                │ alpha                    │  < 1 MiB │
        │ Not Installed    │ gcloud Beta Commands                                 │ beta                     │  < 1 MiB │
        │ Not Installed    │ gcloud app Java Extensions                           │ app-engine-java          │ 52.7 MiB │
        │ Not Installed    │ gcloud app PHP Extensions                            │ app-engine-php           │ 21.9 MiB │
        │ Not Installed    │ gcloud app Python Extensions                         │ app-engine-python        │  7.7 MiB │
        │ Not Installed    │ gcloud app Python Extensions (Extra Libraries)       │ app-engine-python-extras │ 26.4 MiB │
        │ Not Installed    │ kpt                                                  │ kpt                      │ 12.8 MiB │
        │ Not Installed    │ kubectl                                              │ kubectl                  │  < 1 MiB │
        │ Not Installed    │ kubectl-oidc                                         │ kubectl-oidc             │ 17.5 MiB │
        │ Not Installed    │ pkg                                                  │ pkg                      │          │
        │ Installed        │ BigQuery Command Line Tool                           │ bq                       │  < 1 MiB │
        │ Installed        │ Cloud Storage Command Line Tool                      │ gsutil                   │  4.3 MiB │
        └──────────────────┴──────────────────────────────────────────────────────┴──────────────────────────┴──────────┘
        To install or remove components at your current SDK version [356.0.0], run:
        $ gcloud components install COMPONENT_ID
        $ gcloud components remove COMPONENT_ID
        
        To update your SDK installation to the latest version [357.0.0], run:
        $ gcloud components update
        
        
        Modify profile to update your $PATH and enable shell command
        completion?
        
        Do you want to continue (Y/n)?  y
        
        The Google Cloud SDK installer will now prompt you to update an rc
        file to bring the Google Cloud CLIs into your environment.
        
        Enter a path to an rc file to update, or leave blank to use
        [/Users/nextree/.bash_profile]:  
        Backing up [/Users/nextree/.bash_profile] to [/Users/nextree/.bash_profile.backup].
        [/Users/nextree/.bash_profile] has been updated.
        
        ==> Start a new shell for the changes to take effect.
        
        
        Cloud SDK works best with Python 3.7 and certain modules.
        
        Download and run Python 3.7 installer? (Y/n)?  n
        
        
        For more information on how to get started, please visit:
        https://cloud.google.com/sdk/docs/quickstarts
  ```
  
    * ~~gcloud + kubectl~~
        * [sdk 설치](https://cloud.google.com/sdk/docs/install)
        * ``` gcloud init ```
        * ``` gcloud container clusters get-credentials nara-nextstep --zone asia-northeast1-a --project nara-dev ```
        * ``` kubectl get pods -n nara-system (개발계 클러스터 pod 접근 확인) ```
    * kubernetes IDEA 설정
        * 플러그인      
          ![img.png](https://gitlab.com/naraplatform/nara-dev-log/-/raw/main/21-09-2주차/ref/210907/img.png)
        * shift 2번 탭하여 kubernetes 툴 윈도우 추가     
          ![img_1.png](https://gitlab.com/naraplatform/nara-dev-log/-/raw/main/21-09-2주차/ref/210907/img_1.png)
        * 클러스터(GKE) 정보 확인   
          ![img_2.png](https://gitlab.com/naraplatform/nara-dev-log/-/raw/main/21-09-2주차/ref/210907/img_2.png)
